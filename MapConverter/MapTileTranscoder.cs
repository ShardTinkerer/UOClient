using GameData.Enums;
using System.Diagnostics;

namespace MapConverter
{
    internal class MapTileTranscoder
    {
        private static readonly ushort[] ids = new ushort[ushort.MaxValue];

        public static ushort GetNewId(ushort oldId)
        {
            return ids[oldId];
        }

        private static void Set(LandTileId newId, params ushort[] oldIds)
        {
            for (int i = 0; i < oldIds.Length; i++)
            {
                Debug.Assert(ids[oldIds[i]] == 0);

                ids[oldIds[i]] = (ushort)newId;
            }
        }

        static MapTileTranscoder()
        {
            Set(LandTileId.Dirt, 113, 114, 115, 116, 117, 118, 119, 120);
            Set(LandTileId.Forest, 196, 197, 198, 199);
            Set(LandTileId.Furrows, 9, 14, 336, 341);
            Set(LandTileId.Jungle, 172, 173, 174, 175);
            
            Set(LandTileId.Rock, 556, 557, 558, 559, 1754, 1755, 1756, 1757,
                1787, 1788, 1789, 1790, 1851, 1852, 1853, 1854, 1881, 1882, 1883, 1884,
                2001, 2002, 2003, 2004);

            Set(LandTileId.Sand, 22, 23, 24, 25);
            Set(LandTileId.Snow, 282, 283, 284, 285);
            Set(LandTileId.Unused, 0, 1, 2);

            Set(LandTileId.Grass, 3, 4, 5, 6);

            // Sand cliffs N-S
            Set(LandTileId.SandCliff_N_S, 27, 33, 36, 37, 40, 41, 44, 49, 68, 71, 442, 448, 451, 452, 455, 456, 459, 464);

            // Sand cliffs NE-SW
            Set(LandTileId.SandCliff_NE_SW, 30, 31, 45, 73, 74, 445, 446, 460);

            // Sand cliffs E-W
            Set(LandTileId.SandCliff_E_W, 26, 34, 35, 38, 39, 42, 43, 50, 69, 70, 441, 449, 450, 453, 454, 457, 458, 465);

            // Sand cliffs NW-SE
            Set(LandTileId.SandCliff_NW_SE, 28, 29, 32, 46, 47, 48, 72, 75, 443, 444, 461, 462, 463);

            // Forest <-> grass
            Set(LandTileId.Grass, 192, 193, 194, 195,
                200, 201, 202, 203, 204, 205, 206, 207, 208, 209,
                210, 211, 212, 213, 214, 215, 216, 217, 218, 219);

            // Grass <-> sand
            Set(LandTileId.Grass, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62);

            // Grass <-> dirt
            Set(LandTileId.Grass, 121, 122, 123, 124, 125, 126, 127, 128, 129,
                130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 365, 366, 367, 368,
                871, 872, 873, 874, 875, 876, 877, 878, 879, 880,
                881, 882, 883, 884, 885, 886, 887, 888, 889, 890,
                891, 892, 893, 894);

            // Rock <-> dirt
            Set(LandTileId.Dirt, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 321, 322, 323, 324);

            // Rock <-> forest
            Set(LandTileId.Forest, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247);

            // Rock <-> jungle
            Set(LandTileId.Jungle, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263);

            // Rock <-> snow
            Set(LandTileId.Snow, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 302, 303, 304, 305);

            // Rock <-> sand
            Set(LandTileId.Sand, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301);

            // Forest <-> dirt
            Set(LandTileId.Forest, 332, 333, 334, 335, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364,
                369, 370, 371, 372, 804, 805, 806, 807, 808, 809, 810, 811, 812, 813, 814, 815,
                1351, 1352, 1353, 1354, 1355, 1356, 1357, 1358, 1359, 1360, 1361, 1362, 1363, 1364, 1365, 1366);

            // Grass <-> forest
            Set(LandTileId.Grass, 420, 421, 422, 423);

            // Sand <-> Grass
            Set(LandTileId.Sand, 424, 425, 426, 427,
                951, 952, 953, 954, 955, 956, 957, 958, 959, 960,
                961, 962, 963, 964, 965, 966, 967, 968, 969, 970,
                971, 972, 973, 974);

            // Jungle <-> dirt
            Set(LandTileId.Jungle, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633,
                1431, 1432, 1433, 1434, 1435, 1436, 1437, 1438, 1439,
                1440, 1441, 1442, 1443, 1444, 1445, 1446);

            // Jungle <-> sand
            Set(LandTileId.Jungle, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 656, 657, 658, 659, 660, 661,
                1447, 1448, 1449, 1450, 1451, 1452, 1453, 1454, 1455, 1456, 1457, 1458, 1459,
                1460, 1461, 1462, 1463, 1464, 1465, 1466);

            // Sand <-> dirt
            Set(LandTileId.Dirt, 821, 822, 823, 824, 825, 826, 827, 828, 829, 830,
                831, 832, 833, 834, 835, 836, 837, 838, 839, 840,
                841, 842, 843, 844, 845, 846, 847, 848, 849, 850,
                851, 852, 853, 854, 855, 856, 857, 858, 859, 860);

            // Snow <-> dirt
            Set(LandTileId.Dirt, 901, 902, 903, 904, 905, 906, 907, 908, 909, 910,
                911, 912, 913, 914, 915, 916, 917, 918, 919, 920,
                921, 922, 923, 924, 925, 926, 927, 928, 929, 930,
                931, 932, 933, 934, 935, 936, 937, 938, 939, 940,
                1471, 1472, 1473, 1474, 1475, 1476, 1477, 1478, 1479,
                1480, 1481, 1482, 1483, 1484, 1485, 1486, 1487, 1488, 1489,
                1490, 1491, 1492, 1493, 1494, 1495, 1496, 1497, 1498, 1499,
                1500, 1501, 1502, 1503, 1504, 1505, 1506, 1507, 1508, 1509,
                1510);

            // Grass <-> jungle
            Set(LandTileId.Grass, 1401, 1402, 1403, 1404, 1405, 1406, 1407, 1408, 1409, 1410,
                1411, 1412, 1413, 1414, 1415, 1416, 1417, 1418, 1419, 1420);

            Set(LandTileId.Lava, 500, 501, 502, 503);
            Set(LandTileId.Water, 168, 169, 170, 171, 310, 311);
            Set(LandTileId.Swamp, 15849, 15850, 15851, 15852);

            Set(LandTileId.Acid, 11790, 11791, 11818, 11819,
                11820, 11821, 11822, 11823, 11824, 11825, 11826, 11827, 11828, 11829,
                11830, 11831, 11832, 11833, 11834, 11835);
        }
    }
}
